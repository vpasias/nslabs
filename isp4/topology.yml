# Service Provider Network Topology
#
# BGP configuration
bgp:
  as_list:
    65000:
      members: [ e1, e3, i1, i2 ]
      rr: [ i1, i2 ]
    65100:
      members: [ e2, e4 ]
    65200:
      members: [ e5, e6 ]
    65300:
      members: [ e7, e8 ] 
    65001:
      members: [ n1 ]
    65002:
      members: [ n2 ]
    65003:
      members: [ n9 ]
    65004:
      members: [ n10 ]        
      
# Defaults      
defaults:
  device: eos

nodes:
# Core routers - P routers - backbone super-spine switches
  c1:
    module: [ sr,isis ]
    addressing:
      p2p:
        unnumbered: true
      loopback:
        ipv6: 2001:db8:cafe::/48      
  c2:
    module: [ sr,isis ]
    addressing:
      p2p:
        unnumbered: true
      loopback:
        ipv6: 2001:db8:cafe::/48
  c3:
    module: [ sr,isis ]
    addressing:
      p2p:
        unnumbered: true
      loopback:
        ipv6: 2001:db8:cafe::/48      
  c4:
    module: [ sr,isis ]
    addressing:
      p2p:
        unnumbered: true
      loopback:
        ipv6: 2001:db8:cafe::/48        
# Agreggation routers - PE L1 routers - distribution super-spine switches
  a1:
    module: [ sr,isis ] 
    addressing:
      p2p:
        unnumbered: true
      loopback:
        ipv6: 2001:db8:cafe::/48     
  a2:
    module: [ sr,isis ]
    addressing:
      p2p:
        unnumbered: true
      loopback:
        ipv6: 2001:db8:cafe::/48     
  a3:
    module: [ sr,isis ]
    addressing:
      p2p:
        unnumbered: true
      loopback:
        ipv6: 2001:db8:cafe::/48     
  a4:
    module: [ sr,isis ]
    addressing:
      p2p:
        unnumbered: true
      loopback:
        ipv6: 2001:db8:cafe::/48     
  a5:
    module: [ sr,isis ]
    addressing:
      p2p:
        unnumbered: true
      loopback:
        ipv6: 2001:db8:cafe::/48     
  a6:
    module: [ sr,isis ]
    addressing:
      p2p:
        unnumbered: true
      loopback:
        ipv6: 2001:db8:cafe::/48
# Service routers - Route Reflectors
  i1:
    module: [ sr, isis, bgp ]
  i2:
    module: [ sr, isis, bgp ]
# Edge routers - PE L2 routers - access/spine switches
  e1:
    module: [ sr, isis, bgp ] 
  e2:
    module: [ sr, isis, bgp ]
    addressing:
      p2p:
        unnumbered: true
      loopback:
        ipv6: 2001:db8:cafe::/48
  e3:
    module: [ sr, isis, bgp ]  
  e4:
    module: [ sr, isis, bgp ]
    addressing:
      p2p:
        unnumbered: true
      loopback:
        ipv6: 2001:db8:cafe::/48
  e5:
    module: [ sr, isis, bgp ]
  e6:
    module: [ sr, isis, bgp ]
  e7:
    module: [ sr, isis, bgp ]
  e8:
    module: [ sr, isis, bgp ]
# Customer routers - CE routers - leaf/ToR switches
  n1:
    device: iosv
    module: [ bgp ]
  n2:
    device: iosv
    module: [ bgp ]
  n3:
    device: cumulus
    addressing:
      p2p:
        unnumbered: true
      loopback:
        ipv6: 2001:db8:cafe::/48    
  n4:
    device: cumulus
    addressing:
      p2p:
        unnumbered: true
      loopback:
        ipv6: 2001:db8:cafe::/48    
  n5:
    device: eos
  n6:
    device: eos
  n7:
    device: cumulus
    addressing:
      p2p:
        unnumbered: true
      loopback:
        ipv6: 2001:db8:cafe::/48    
  n8:
    device: cumulus
    addressing:
      p2p:
        unnumbered: true
      loopback:
        ipv6: 2001:db8:cafe::/48    
  n9:
    device: iosv
    module: [ bgp ]
  n10:
    device: iosv
    module: [ bgp ]
  n11:
    device: iosv
    addressing:
      p2p:
        unnumbered: true
      loopback:
        ipv6: 2001:db8:cafe::/48
  n12:
    device: iosv
    addressing:
      p2p:
        unnumbered: true
      loopback:
        ipv6: 2001:db8:cafe::/48    
# Client routers
  p1:
    device: iosv
    dhcp_prefix: 10.41.41.0/24   
  p2:
    device: iosv
    dhcp_prefix: 10.42.42.0/24    
  q1:
    device: iosv
  q2:
    device: iosv 

links:
# Core layer links
- c1-c2
- c1-c3
- c2-c4
- c3-c4
- c1-c4
- c2-c3

# Agreggation layer links
- a1-c1
- a1-c2
- a2-c1
- a2-c2
- a1-a2
- a3-c3
- a3-c4
- a4-c3
- a4-c4
- a3-a4
- a5-c1
- a5-c3
- a6-c1
- a6-c3
- a5-a6

# Service area links
- i1-a5
- i1-a6
- i2-a5
- i2-a6

# Edge layer links
- e1-a1
- e1-a2
- e2-a1
- e2-a2
- e3-a3
- e3-a4
- e4-a3
- e4-a4
- e5-a1
- e5-a2
- e6-a3
- e6-a4
- e7-a1
- e7-a2
- e8-a3
- e8-a4

# External links
- n1-e1
- n2-e3
- n3-e2
- n4-e4
- n5-e5
- n6-e6
- n7-e2
- n8-e4
- n9-e1
- n10-e3
- n11-e7
- n12-e8
- n11-p1
- n12-p2
- p1:
  q1:
  role: dhcp
- p2:
  q2:
  role: dhcp

# Stub links
- n1
- n2
- n3
- n4
- n5
- n6
- n7
- n8
- n9
- n10
- n11
- n12
- p1
- p2
- q1
- q2
