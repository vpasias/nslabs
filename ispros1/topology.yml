---
defaults:
  device: routeros

vrfs:
  blue:
  red:

module: [ vrf,ospf,bgp,mpls ]
bgp.as: 65000

nodes:
  c1:
    id: 1
    mpls.ldp: true
    module: [ ospf,mpls ]
  c2:
    id: 2
    mpls.ldp: true
    module: [ ospf,mpls ]
  c3:
    id: 3
    mpls.ldp: true
    module: [ ospf,mpls ]
  c4:
    id: 4
    mpls.ldp: true
    module: [ ospf,mpls ]
  a1:
    id: 5
    mpls.ldp: true
    module: [ ospf,mpls ]
    bgp.as: 65000
  a2:
    id: 6
    mpls.ldp: true
    module: [ ospf,mpls ]
    bgp.as: 65000
  a3:
    id: 7
    mpls.ldp: true
    module: [ ospf,mpls ]
    bgp.as: 65000
  a4:
    id: 8
    mpls.ldp: true
    module: [ ospf,mpls ]
    bgp.as: 65000
  rr1:
    id: 9
    mpls:
      ldp: true
      vpn: true
    bgp.rr: true
  rr2:
    id: 10
    mpls:
      ldp: true
      vpn: true
    bgp.rr: true
  e1:
    mpls:
      vpn: true
      ldp: true
    id: 11
  e2:
    mpls:
      vpn: true
      ldp: true
    id: 12
  e3:
    mpls:
      vpn: true
      ldp: true
    id: 13
  e4:
    mpls:
      vpn: true
      ldp: true
    id: 14
  x1:
    module: [ bgp ]
    bgp.as: 65101
    id: 21
  x2:
    module: [ bgp ]
    bgp.as: 65102
    id: 22
  x3:
    module: [ bgp ]
    bgp.as: 65103
    id: 23
  x4:
    module: [ bgp ]
    bgp.as: 65104
    id: 24
  x5:
    device: linux
  x6:
    device: linux
  x7:
    device: linux
  x8:
    device: linux
    
links:
# Core layer links
- c1-c2
- c1-c3
- c2-c4
- c3-c4
- c1-c4
- c2-c3

# Agreggation layer links
- a1-c1
- a1-c2
- a2-c1
- a2-c2
- a1-a2
- a3-c3
- a3-c4
- a4-c3
- a4-c4
- a3-a4

# Edge layer links
- e1:
  a1:
- e2:
  a1:
- e3:
  a3:
- e4:
  a3:
- a1:
  rr1:
- a2:
  rr1:
- a3:
  rr2:
- a4:
  rr2:
- e1: { vrf: blue }
  x1:
- e2: { vrf: blue }
  x1:
- e1: { vrf: blue }
  x2:
- e2: { vrf: blue }
  x2:
- e3: { vrf: blue }
  x3:
- e3: { vrf: blue }
  x4:
- e4: { vrf: blue }
  x3:
- e4: { vrf: blue }
  x4:
- e1: { vrf: red }
  x5:
- e2: { vrf: red }
  x6:
- e3: { vrf: red }
  x7:
- e4: { vrf: red }
  x8:
